# 要件定義書: 装備ドロップ＆コレクション機能

## 機能概要
ボスバトル勝利時の報酬として「武器」をドロップする機能を追加する。
入手した武器はコレクションとして保存され、装備することで攻撃力（1回あたりのダメージ）が上昇する。
これにより、ユーザーの「ボスを倒す楽しみ」と「強くなる実感」を強化し、継続率を向上させる。

## ユーザーストーリー
- ユーザーとして、ボスを倒した際にご褒美が欲しい。なぜなら、きついトレーニングの達成感を高めたいから。
- ユーザーとして、集めた武器を一覧で見たい。なぜなら、コレクションを埋める楽しみを感じたいから。
- ユーザーとして、武器を装備して攻撃力を上げたい。なぜなら、よりHPの高いボスを効率よく倒したいから。
- ユーザーとして、同じ武器を手に入れたときにガッカリしたくない。なぜなら、ハズレ感はモチベーションを下げるから。

## 機能要件

### 要件1：武器ドロップシステム
- ボス討伐時（HPが0になった時）、確率で武器を入手する。
- 武器にはレアリティ（コモン、レア、エピック、レジェンダリーなど）を設定する。
- **重複入手**: 既に所持している武器がドロップした場合、その武器のレベルが1上がる。
  - レベルには上限（Max Level）を設ける。
  - 上限に達している場合は、何も起こらないか、または微量のボーナス（今回は実装簡易化のため「上限です」と表示、または代替アイテムだが、まずはレベルキャップのみ）とする。
  - レベルアップによる攻撃力上昇は、上位レアリティの基本攻撃力を超えない範囲で調整する。

### 要件2：インベントリと装備管理
- ユーザーが所持している武器リストを `localStorage` に保存する。
- 初期状態では「素手（Unarmed）」のみ所持し、装備している。
- ユーザーは任意の所持武器を「装備」できる。
- 装備中の武器の攻撃力が、基本攻撃力に加算される。

### 要件3：UI/UX
- **装備ボタン**: ボスカード内に「装備」ボタンを配置する。
- **装備モーダル**: ボタンクリックでモーダルを開く。
  - 所持している武器を一覧表示する。
  - 各武器のアイコン（絵文字）、名前、レベル、攻撃力補正を表示する。
  - 未入手の武器は「？」または非表示（今回は「？」シルエット表示はせず、持っているものだけ表示するリスト形式とする）。
  - リスト項目をクリックすると、その武器を装備する。
  - 現在装備中の武器にはマーカーを表示する。
- **ドロップ通知**: 武器入手時、画面上部（Toast）またはボスのアバター付近に演出を表示する。

## 非機能要件
- モバイルでも操作しやすいUIサイズであること。
- データ保存は即座に行い、リロードしても消失しないこと。
