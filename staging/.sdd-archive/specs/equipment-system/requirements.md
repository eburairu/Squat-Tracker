# 要件定義書: 装備ドロップ＆コレクション機能（Update: レアリティ拡張）

## 機能概要
（既存機能に加え）全ての武器種に対してレアリティ（★1〜★5）のバリエーションを導入する。
ドロップ時にはまずレアリティが抽選され、高レアリティほど入手確率を低く、性能を高く設定する。
これにより、ユーザーに「同じ武器でもより良いものを探す」というハクスラ的な楽しみを提供する。

## 変更された機能要件

### 要件1：レアリティシステム
- **5段階のレアリティ**: ★1(Common) 〜 ★5(Legendary) を設定。
- **バリエーション展開**: 定義された全ての「基本武器」に対して、★1〜★5のバリエーションが存在する（例：「ひのきの棒」にも★5が存在する）。
- **ステータス補正**: レアリティが高いほど、基本攻撃力が高くなる。
- **別アイテム扱い**: 同じ武器名でも、レアリティが異なればインベントリ内では別枠として管理する。
  - レベルアップは「名前とレアリティが完全に一致する場合」のみ発生する。

### 要件2：ドロップ確率（重み付け）
以下の確率分布を目安に実装する。
- ★1 (Common): 50%
- ★2 (Uncommon): 30%
- ★3 (Rare): 15%
- ★4 (Epic): 4.5%
- ★5 (Legendary): 0.5%

### 要件3：UI/UX
- **武器名表示**: リスト上でレアリティによる違いが分かるようにする（既存の `★` 表示を活用、または色分け）。
- **通知**: 高レアリティ入手時は、通知メッセージで分かりやすく祝福する（例: 「LEGENDARYアイテム獲得！」など）。

## 既存要件（維持）
- インベントリ管理、装備機能、攻撃力計算への反映などは既存のまま維持する。
