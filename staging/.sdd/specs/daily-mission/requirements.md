# 要件定義書: デイリーミッション機能

## 機能概要
ユーザーのモチベーション維持とアプリ起動率向上を目的として、毎日ランダムに提示される3つのミッションを達成することで報酬（武器）を獲得できる機能を実装する。

## ユーザーストーリー
- ユーザーとして、毎日アプリを開いたときに明確な目標（ミッション）が欲しい。なぜなら、ただ漫然とトレーニングするよりも達成感を得たいから。
- ユーザーとして、ミッション達成の報酬として確実にアイテムを得たい。なぜなら、運要素（ボス討伐時の30%）だけではモチベーション維持が難しいときがあるから。
- ユーザーとして、自分のできる範囲の目標に挑戦したい。なぜなら、難しすぎる（または機材がないとできない）目標はやる気を削ぐから。

## 機能要件

### 要件1：ミッションの生成と更新
- 毎日0時（ローカル時間）にミッションをリセットし、新しいミッションを3つ生成する。
- ミッションの種類は以下のプールからランダムに選択される（重複なし）。
    - **継続系**: アプリを起動する（ログインボーナス相当）、3日連続でトレーニングする、など。
    - **努力系**: 合計30回スクワットする、3セット完了する、合計5分トレーニングするなど。
    - **設定条件系**: 休憩時間を30秒以内で完了する、など。
    - ※センサーモード必須のミッションは含めない。
- 生成されたミッションは `localStorage` に保存され、日が変わるまで維持される。

### 要件2：ミッションの表示 (UI)
- トップ画面の「ボスカード」の上部に新しい「デイリーミッション」カードを表示する。
- 各ミッションについて以下の情報を表示する：
    - 内容（テキスト）
    - 進捗状況（例: 10/30回）または達成状態
    - 報酬アイコン（未受取/受取済）
- 達成済みのミッションは視覚的に強調（チェックマーク等）し、報酬を受け取れる状態にする。

### 要件3：達成判定と進捗更新
- ユーザーのアクション（トレーニング完了、アプリ起動など）をフックとして、該当するミッションの達成条件をチェックする。
- 進捗がある場合は `localStorage` を更新し、UIに反映する。
- 達成条件を満たした場合、ステータスを「達成済み（未受取）」に変更する。

### 要件4：報酬の付与
- 達成済みのミッションをクリック（またはタップ）することで報酬を受け取れる。
- 報酬として、**100%の確率で武器を獲得**する（既存の `BossBattle.rollDrop` 相当のロジックを使用するが確率は100%）。
- 報酬受取時にトースト通知などでユーザーにフィードバックを行う。
- 受取後はステータスを「受取済み」に変更し、再度受け取れないようにする。

## 非機能要件
- **永続性**: ブラウザを閉じても当日のミッションと進捗は保持されること。
- **堅牢性**: 日付変更時のリセット処理が、アプリ起動時またはフォアグラウンド復帰時に正しく動作すること。
- **パフォーマンス**: 毎回のカウントアップ等で過度な負荷をかけないこと。
