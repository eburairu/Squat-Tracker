# Squat-Tracker

毎日のスクワットを記録するためのシンプルなWebアプリです。リズムガイドに合わせてトレーニングを行い、ボスバトルや活動ヒートマップで継続をサポートします。

## 主な機能

- **リズムガイド**: しゃがむ・キープ・立つのリズムを音とアニメーションでガイドします。
- **ボスバトル**: スクワットの回数がダメージとなり、モンスターを倒していくRPGモード。放置するとモンスターのHPが回復するため、継続的なトレーニングが求められます。
- **モンスター図鑑**: 遭遇・撃破したモンスターの情報を閲覧できる図鑑機能。まだ見ぬ強敵はシルエットで表示され、コレクション要素として楽しめます。
- **アドベンチャーモード**: ボスを倒してマップを進む「すごろく」形式の冒険モード。エリアごとに背景やテーマが変化し、トレーニングの達成感を視覚化します。エリア進行時やクリア時には、難易度と報酬が異なるルート（王道・修羅の道・裏道）を選択する分岐イベントが発生します。
- **武器収集**: ボス討伐やミッション達成で武器を獲得。装備することで攻撃力が上がり、ボスを倒しやすくなります。同じ武器を手に入れるとレベルアップします。
- **デイリーミッション**: 毎日更新される3つのミッションを達成すると、報酬として必ず武器が手に入ります。
- **ウィークリーチャレンジ**: 1週間単位で達成を目指すミッション。達成すると高レアリティの武器などの豪華報酬を獲得できます。
- **計算クイズ**: スクワット中に計算問題が出題され、脳トレと同時にトレーニングができます。特定の条件下でクリティカルヒットが発生します。
    - **協力モード**: 正解すると攻撃ボーナスを獲得。
    - **お邪魔モード**: 不正解だとその回がノーカウントになり、やり直しになります。
- **テンション・ブースト**: トレーニングやクイズ正解でテンションが蓄積し、MAXになると30秒間「ブーストモード」が発動。攻撃力が1.5倍になり、一気にボスを追い詰めるチャンスです。
- **マイ・メニュー**: 自分好みの設定（回数、秒数など）をプリセットとして保存・呼び出しが可能です。
- **装備マイセット（ロードアウト）**: 現在の「クラス」「武器」「称号」の組み合わせをセットとして保存し、ワンタップで呼び出せる機能。ボスや目的に合わせて瞬時に装備を切り替えられます。
- **実績バッジ**: 継続日数や累計回数など、様々な条件でバッジを獲得できます。
- **クラスシステム**: 「戦士」「魔法使い」「盗賊」などのクラス（職業）を選択し、攻撃力アップやクリティカル率上昇などのボーナス効果を得られます。また、1セッションに1度発動できる強力な**アクティブスキル**（攻撃力1.5倍、クイズ自動正解など）を持ち、戦略的な活用が可能です。さらに、使い続けることで**熟練度**が上がり、クラスレベルが上昇するとボーナス効果が強化されます。
- **称号システム**: 実績解除などで獲得した称号（「形容詞」+「名詞」）を組み合わせて、自分だけの肩書きを設定できます。
- **戦績シェアカード生成**: トレーニング完了後に、成果や現在のRPGステータス（武器・称号・ボス討伐状況）を統合した「戦績カード」を画像として生成・ダウンロードし、SNS等でシェアできます。
- **継続サポート**: 日替わりの応援メッセージ、連続記録日数、GitHub風の活動ヒートマップでモチベーションを維持します。
- **ストリーク・ガーディアン**: 連続記録が途切れるまでの残り時間を可視化し、うっかり記録が途切れるのを防ぎます。「Safe」「Warning」「Danger」のステータスで危機感をお知らせします。
- **データ管理**: 記録データをJSONファイルとしてバックアップ・復元できます。
- **音声コーチ**: 日本語音声でカウントや励ましの声をかけます。
- **音声コマンド操作**: 「スタート」「ストップ」などの声でアプリをハンズフリー操作できます（Chrome推奨）。
- **次回の誓い**: トレーニング完了時に次回の予定を「誓約」し、達成するとボーナス、破るとペナルティが発生する機能。継続への強制力を生み出します。
- **センサーモード**: スマホのジャイロセンサー（Device Orientation）を利用し、深くしゃがんだ時のみカウントする厳密なモードです。
- **テーマ切り替え**: ダークモードとライトモードを切り替え可能です。

## 使い方

1. アプリケーションを開きます（ローカルの場合はWebサーバー経由でアクセスしてください）。
2. **設定**: 回数・セット数・秒数を指定するか、「マイ・メニュー」からプリセットを選択します。
3. **スタート**: 「スタート」を押してガイドに合わせてスクワットします。
4. **ミッション**: 画面上部の「今日のミッション」を確認し、達成を目指します。「今週の挑戦」タブでウィークリーミッションも確認できます。
5. **装備**: 武器を手に入れたら「装備」ボタンから最強の武器を装備しましょう。
6. **図鑑**: ボスバトルの「図鑑」ボタンから、これまでに遭遇したモンスターの詳細情報を確認できます。
7. **センサーモード**: センサーモードを使う場合はスマホを太ももの前面に固定してオンにします。
8. **実績確認**: 「過去の実績」カードのタブを切り替えて、獲得したバッジや履歴を確認できます。
9. **称号設定**: 実績画面の「称号設定」から、獲得した称号を組み合わせてプロフィールに表示できます。
10. **クラス変更**: 画面上部のステータスパネルにある「クラス」アイコン（初期は🌱）をタップすると、クラス変更画面が開きます。
11. **マイセット**: ステータスパネルの「マイセット」アイコン（📂）から、現在の装備を保存・適用できます。
12. **シェア**: トレーニング完了画面の「シェア画像を作成」ボタンから、本日の戦績カードを保存してシェアできます。
12. **音声操作**: 画面下部の設定パネルで「音声コマンド」をONにすると、「スタート」「ストップ」「リセット」と話しかけるだけで操作できます。トレーニング中にスマホに触れる必要がありません。

## 開発用のローカル実行

本プロジェクトはES Modulesの使用および外部JSONデータの非同期読み込み（`fetch`）を行っているため、ローカルで動作確認する際は必ずWebサーバーを経由する必要があります。

```bash
python -m http.server 8000
```

ブラウザで `http://localhost:8000/index.html` を開いてください。

## GitHub Pages でのデプロイ

`main` への push は本番用、`develop` への push は検証用として GitHub Pages に自動デプロイします。公開先は `gh-pages` ブランチ配下のディレクトリを使い分けます。

- 本番: `https://eburairu.github.io/Squat-Tracker/prod/`
- 検証: `https://eburairu.github.io/Squat-Tracker/staging/`

`Settings` → `Pages` で `Source` を `Deploy from a branch` にし、`gh-pages` ブランチの `/ (root)` を選択してください（`/prod` と `/staging` はその配下でホストされます）。
