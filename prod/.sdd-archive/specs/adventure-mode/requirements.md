# Requirements: Adventure Mode (World Map)

## 1. 概要
「継続」を「冒険」に変えるため、トレーニングの進捗を視覚化するワールドマップ機能を実装する。
ユーザーは敵を倒すことでマップ上のマス（Node）を進み、エリア（Area）を攻略していく。

## 2. 目的
- **進捗の可視化**: 「どこまでやったか」「あとどれくらいでクリアか」を一目で分かるようにする。
- **世界観の強化**: 変化のない画面でのトレーニングによる飽きを防ぐ。
- **達成感の付与**: エリアクリアというマイルストーンを設ける。

## 3. 機能要件

### 3.1 進行システム (Sugoroku Logic)
- **マップ構造**:
  - 世界は複数の「エリア (Area)」で構成される（順序: 草原 → 森 → 砂漠 → 洞窟 → 魔王城）。
  - 各エリアは複数の「マス (Node)」で構成される（例: 1エリア10マス）。
- **進行ルール**:
  - 現在のマスに「敵」が存在する。
  - ボスバトルで敵のHPを0にすると、敵討伐となり「次のマス」へ移動する。
  - エリアの最後のマスをクリアすると、次のエリアへ移動する。
  - エリアクリア時にはファンファーレや特別な演出（既存のConfetti利用可）を行う。

### 3.2 UI/UX (Background Integration)
- **背景表現**:
  - 現在のエリアに応じた背景色（CSS Gradient）または画像を表示する。
  - 画面上部（または適切な位置）に「エリア進行バー（簡易ミニマップ）」を表示する。
    - スタート地点、現在地（アバター）、ゴール地点、中間のマスを表示。
    - アバターはスクワットをする人のアイコンなどを利用。
- **情報表示**:
  - 現在のエリア名（例: 「はじまりの草原」）。
  - 進捗状況（例: Area 1-3）。

### 3.3 データ管理
- **セーブデータ**:
  - 現在のエリアID (`currentAreaId`)
  - 現在のマスインデックス (`currentNodeIndex`)
  - これらを `localStorage` に保存し、次回起動時に続きから再開できる。

## 4. 非機能要件
- **パフォーマンス**: 背景描画やアニメーションがトレーニングのリズム（描画更新）を阻害しないこと。
- **レスポンシブ**: スマホ画面でもミニマップが潰れずに視認できること。

## 5. ユースケース
1. **初回プレイ**: 「はじまりの草原」のマス1からスタート。背景は明るい緑。
2. **敵討伐**: スクワットで敵を倒すと、アバターがマス1からマス2へ移動。
3. **エリアクリア**: マス10のボスを倒すと、「エリアクリア！」の表示とともに、背景が「迷いの森（深緑）」に切り替わる。

## 6. エッジケース・制約
- 全エリアクリア後はどうするか？
  - 「エンドレスモード（魔界の最深部）」として、ループするか、難易度が上がった2周目に突入する。今回はシンプルに「最終エリアをループ」または「ランダムエリア」とする。
- 既存セーブデータとの互換性
  - 既存ユーザーは自動的に「エリア1・マス1」からスタートする。
