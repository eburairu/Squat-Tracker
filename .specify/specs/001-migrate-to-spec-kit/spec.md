# 機能仕様書: Spec Kit への移行によるドキュメント管理プロセス刷新

**機能ブランチ**: `migrate-to-spec-kit` (本作業用)
**作成日**: 2024-05-23
**ステータス**: Draft
**入力**: ユーザー要件: "現在のドキュメント管理プロセス自体を一新したい (spec-kit利用)"

## ユーザーストーリー & テスト *(必須)*

### ユーザーストーリー 1 - Spec Kit 基盤の確立 (優先度: P1)

開発者（およびAIエージェント）は、新しい `spec-kit` ツールセット (`.specify` ディレクトリ構造と CLI) を使用して、開発プロセスを開始できる必要があります。これにより、標準化されたテンプレートと日本語のガイドラインに従った開発が可能になります。

**優先度の理由**: 新しいプロセスの基盤であり、これがなければ他の移行作業も行えないため。

**独立テスト**: プロジェクトルートで `specify check` (または関連コマンド) が動作し、`.specify/memory/constitution.md` が正しく日本語で読み込まれることを確認する。

**受け入れシナリオ**:

1. **Given** プロジェクトルートで, **When** `.specify` フォルダが存在し, **Then** `constitution.md` に日本語のルールが記載されている。
2. **Given** 開発環境で, **When** `specify` CLI ツールがインストールされている, **Then** プロジェクトの設定を認識できる。

---

### ユーザーストーリー 2 - 既存運用ルールの統合と移行 (優先度: P1)

`AGENTS.md` や `.sdd/` に散在していた既存の運用ルール（日本語厳守、SDDフロー、コミット規約など）を、`spec-kit` の `constitution.md` およびテンプレートに統合し、単一の情報源 (SSOT) とします。

**優先度の理由**: ルールの二重管理を防ぎ、AIエージェントや開発者が従うべきルールを明確にするため。

**独立テスト**: `constitution.md` を閲覧し、旧 `AGENTS.md` の主要ルールが含まれていることを確認する。また、旧ファイルが削除またはアーカイブされていることを確認する。

**受け入れシナリオ**:

1. **Given** `.specify/memory/constitution.md`, **When** 内容を確認すると, **Then** 言語設定やコミット規約などが日本語で網羅されている。
2. **Given** `AGENTS.md`, **When** 内容を確認すると, **Then** 詳細なルールは削除され、`spec-kit` への参照のみが記述されている（またはファイル自体が削除されている）。

---

### ユーザーストーリー 3 - レガシー資産 (.sdd) の廃止 (優先度: P2)

混乱を避けるため、旧来の `.sdd` ディレクトリを廃止（削除またはアーカイブ）し、開発者が誤って古いフォーマットを使用しないようにします。

**優先度の理由**: 新旧の仕様書フォーマットが混在すると、AIエージェントや開発者がどちらに従うべきか迷うため。

**独立テスト**: `.sdd` ディレクトリが存在しないか、`.specify/legacy` 等に移動されていることを確認する。

**受け入れシナリオ**:

1. **Given** プロジェクトルート, **When** ファイル一覧を確認すると, **Then** `.sdd` ディレクトリが存在しない（またはアーカイブ場所に移動されている）。

## 要件 *(必須)*

### 機能要件

- **FR-001**: システム（プロジェクト構造）は `spec-kit` 標準の `.specify` ディレクトリを持たなければならない (MUST)。
- **FR-002**: `.specify/memory/constitution.md` は日本語で記述され、既存のプロジェクトルールを継承しなければならない (MUST)。
- **FR-003**: テンプレート (`spec-template.md`, `plan-template.md`, `tasks-template.md`) は日本語化されていなければならない (MUST)。
- **FR-004**: `AGENTS.md` は `spec-kit` の導入に合わせて更新（最小化）されなければならない (MUST)。
- **FR-005**: 旧 `.sdd` ディレクトリは削除またはアーカイブされなければならない (MUST)。

### 主要エンティティ

- **Specification**: `.specify/specs/[feature]/` 配下の仕様書群。
- **Constitution**: プロジェクトの憲法。全ルールの源泉。

## 成功基準 *(必須)*

### 測定可能な成果

- **SC-001**: 開発者が新しいテンプレートを使って、日本語で仕様書を作成できる状態になっていること。
- **SC-002**: プロジェクトルートから旧 `.sdd` が一掃され、ディレクトリ構造がクリーンになっていること。
- **SC-003**: AIエージェントが `constitution.md` を参照して、日本語で正しく応答・作業できること。
