# Requirements: Class System (職業システム)

## 1. 目的
ユーザーに「プレイスタイルの選択」というRPG的な楽しみを提供し、アプリへの愛着と継続率を向上させる。
自分の得意な分野（体力、知力、運）を活かしてボスバトルを有利に進められるようにする。

## 2. 機能要件

### 2.1 クラスデータの定義
以下の属性を持つクラスを定義する。
- **ID**: 一意な識別子 (例: `warrior`, `mage`)
- **名前**: 表示名 (例: `戦士`, `魔法使い`)
- **説明**: 特徴の短い説明
- **アイコン/Emoji**: 視覚的なシンボル
- **補正効果**:
    - `attackMultiplier`: 物理攻撃（スクワット）の倍率
    - `quizMultiplier`: クイズ正解時のダメージ倍率
    - `criticalRateBonus`: クリティカル発生率への加算値

### 2.2 初期実装クラス
1. **戦士 (Warrior)**
   - 特徴: 力任せにボスを叩く。
   - 効果: 物理攻撃力 +20%
2. **魔法使い (Mage)**
   - 特徴: クイズの知識で大ダメージを与える。
   - 効果: クイズ正解ボーナス +50%（通常はダメージ2倍なら3倍になるイメージ）
3. **盗賊 (Rogue)**
   - 特徴: 運を味方につけて急所を狙う。
   - 効果: クリティカル率 +10%

### 2.3 クラス変更機能
- ユーザーは任意のタイミングでクラスを変更できる。
- 変更は即座に反映される。
- UIは「プロフィール」または「設定」画面からアクセス可能（今回はヘッダーまたは独立したボタンからアクセスするモーダルを想定）。
- 初回起動時はデフォルト（`novice` または未設定）とし、チュートリアル的強制はしないが、未設定なら「すっぴん」扱い。あるいはデフォルトで「戦士」にする。
    - **決定**: デフォルトは `novice` (冒険者) とし、補正なし。ユーザーが能動的に選ぶことで効果を得る。

### 2.4 データ永続化
- 選択されたクラスIDを `localStorage` に保存する。

### 2.5 バトルへの適用
- `BossBattle` クラスのダメージ計算式に、現在のクラスの補正値を適用する。
- `Quiz` クラス（または連携部分）にて、正解時のダメージ計算に補正を適用する。

## 3. 非機能要件
- 新しいクラス（例: 課金クラス、イベント限定クラス）を `classes.json` への追記だけで容易に追加できること。
- クラス変更時のUIレスポンスは即時であること。

## 4. UI/UX
- **クラス選択モーダル**:
    - 各クラスのカードが並び、選択すると詳細が表示される。
    - 「このクラスにする」ボタンで決定。
- **HUD表示**:
    - 画面上部（またはステータス欄）に現在のクラスアイコンを表示する。

## 5. エッジケース
- データ破損等で無効なクラスIDが保存されていた場合、デフォルト（`novice`）に戻る。
- クラスデータ（JSON）の読み込みに失敗した場合、補正なしで動作を継続する。
