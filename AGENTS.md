# Agent Instructions

## 基本方針（厳守）

**【重要】言語設定: 日本語**

あなたは日本語のエキスパートエンジニアとして振る舞ってください。以下のルールを**絶対**に遵守してください。これらに例外はありません。

1.  **全ての出力を日本語にする:**
    *   ユーザーへのメッセージ、質問、回答
    *   思考プロセス (Thinking Process)
    *   プランの作成 (`set_plan`)
    *   作成・更新するドキュメント（要件定義書、設計書、タスクリストなど）
    *   Pull Request のタイトル、説明文
    *   コミットメッセージ
    *   コード内のコメント（新規追加分は日本語を推奨）

2.  **入力言語に依存しない:**
    *   ユーザーからの入力や参照ファイルが英語であっても、あなたの出力は**必ず日本語**で行ってください。

3.  **開発プロセス:**
    *   今後のタスク指示はすべて仕様駆動開発（SDD）フローに従うこと（`.sdd/README.md` を参照）。

## Playwrightテスト手順（必須）

1. `npm test` を実行する（`pretest`で`npm ci`と`npx playwright install --with-deps`が自動実行される）。
2. 特定テストのみ実行する場合は `npm run test:screenshot` を使う（`pretest:screenshot`で依存関係とブラウザが整う）。

## プロジェクトコマンド

- Install: pnpm i
- Test: npm test

## 共有スキルカタログ

共有スキルは `.codex/skills/` にある。該当するスキルを使うときは次の手順に従うこと。

1. 対応する `SKILL.md` を開く。
2. 記載された手順を厳守する。
3. 指定された出力形式で回答する。

利用可能なスキル:

- pr-review-checklist: Pull Request のレビュー観点を標準化し、見落としを防ぐためのチェックリストを提供する。
- draft-commit-message: ステージングされた変更内容から Conventional Commits に準拠したコミットメッセージ案を生成する。
- security-quick-audit: 変更差分に対する簡易セキュリティ監査を行い、リスクを洗い出す。
- general-task-playbook: 非開発タスク（調査・ドキュメント作成・運用作業など）を抜け漏れなく進めるための計画・実行テンプレートを提供する。
- sdd-steering: プロジェクトの全体像を把握し、SDDプロセスのための基本ドキュメント（Product, Tech, Structure）を生成・更新する。
- sdd-requirements: 実装したい機能の要件と受け入れ基準を定義し、要件定義書（requirements.md）を作成する。
- sdd-highway: 要件定義書（requirements.md）を基に、詳細設計書やタスクリストの作成を省略し、直接実装と記録を行う高速開発モード。
- sdd-design: 要件に基づき実装方針や技術設計を固め、設計書（design.md）を作成する。
- sdd-tasks: 設計書に基づき実装タスクを分解し、タスクリスト（tasks.md）を作成する。
- sdd-implement: 作成済みのタスクリスト（tasks.md）に従い、厳格なテスト駆動開発（TDD）サイクルを回して実装を進める標準モード。
- sdd-archive: 完了した仕様（spec）をアーカイブし、開発サイクルをクローズする。

## 仕様上の特記事項

- **計算問題UIの反転表示:**
  計算問題カード（`#quiz-card`）は、スクワット実施者とは別のユーザー（オペレーター）が対面（画面上部）から操作することを想定しているため、**常に上下反転（180度回転）** して表示させる仕様となっている。CSSで `transform: rotate(180deg)` を適用して実装すること。これはバグではなく意図的な仕様である。
